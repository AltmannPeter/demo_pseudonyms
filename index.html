<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pseudonym Generator</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="header-row">
    <h1>Pseudonym Generator</h1>
    <button id="reset-button" class="danger-button">Reset All</button>
  </div>

  <div class="section left-accented-box" style="--accent-color: #6b7280;">
    <h2>Prerequisite: Pseudonym Seed</h2>
    <label for="seed-display">Seed Value (Hexadecimal)</label>
    <textarea id="seed-display" rows="1" readonly placeholder="No seed yet"></textarea>
    <button id="generate-seed-button">Generate Nym Seed</button>

    <details class="infobox">
      <summary>üîê How to sync pseudonyms across devices?</summary>
      <p>You can copy this seed and reuse it on another device to regenerate the same pseudonyms. The seed is a portable, secure identifier.</p>
    </details>

    <details class="infobox">
      <summary>üé≤ How is this seed generated?</summary>
      <p>The pseudonym seed can be a 256-bit value generated using a cryptographically secure random number generator. For this demo it is just a random 256-bit number.</p>
    </details>
  </div>

  <div class="section left-accented-box" style="--accent-color: #fa6060;">
    <h2>Step 1a: Register Alias (global alias mapping)</h2>
    <label for="domain-input-linked">Domain</label>
    <input id="domain-input-linked" placeholder="e.g., google.com">

    <label for="alias-input-linked">Alias</label>
    <input id="alias-input-linked" placeholder="e.g., slyfox92">

    <div class="button-row">
      <button id="register-alias-button-linked">Register Alias</button>
      <button id="toggle-registry-button-linked">Show Registry</button>
    </div>

    <div id="registry-display-linked" style="display: none;">
      <h3>Site ‚Üí Aliases</h3>
      <table class="registry-table" id="site-registry-table-linked">
        <thead>
          <tr>
            <th>Domain</th>
            <th>Aliases</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <h3>Alias ‚Üî Index</h3>
      <table class="registry-table" id="alias-registry-table-linked">
        <thead>
          <tr>
            <th>Alias</th>
            <th>Index</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <div class="section left-accented-box" style="--accent-color: #fa6060;">
    <h2>Step 1b: Register Alias (unlinked)</h2>
    <label for="domain-input-unlinked">Domain</label>
    <input id="domain-input-unlinked" placeholder="e.g., google.com">

    <label for="alias-input-unlinked">Alias</label>
    <input id="alias-input-unlinked" placeholder="e.g., slyfox92">

    <div class="button-row">
      <button id="register-alias-button-unlinked">Register Alias</button>
      <button id="toggle-registry-button-unlinked">Show Registry</button>
    </div>

    <div id="registry-display-unlinked" style="display: none;">
      <h3>Site ‚Üí Aliases</h3>
      <table class="registry-table" id="site-registry-table-unlinked">
        <thead>
          <tr>
            <th>Domain</th>
            <th>Index</th>
            <th>Alias</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <div class="section left-accented-box" style="--accent-color: #10b981;">
    <h2>Step 2: Generate Pseudonym</h2>

    <div>
      <label>Registry Type</label>
      <div id="registry-type-options" class="radio-group">
        <label><input type="radio" name="registry-type" value="linked"> Linked</label>
        <label><input type="radio" name="registry-type" value="unlinked"> Unlinked</label>
      </div>
    </div>

    <div>
      <label>Domain</label>
      <div id="domain-options" class="radio-group"></div>
    </div>

    <div>
      <label>Alias</label>
      <div id="alias-options" class="radio-group"></div>
    </div>

    <label for="pseudonym-output">Pseudonym (Hex)</label>
    <textarea id="pseudonym-output" readonly></textarea>
  </div>

  <div class="section left-accented-box" style="--accent-color: #6366f1;">
    <h2>Requirements Evaluation</h2>
    <table class="registry-table">
      <thead>
        <tr>
          <th>Requirement</th>
          <th>Status</th>
          <th>Description</th>
          <th>Comment</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>PA_01</td>
          <td>‚úÖ Met</td>
          <td>SHALL support pseudonym generation</td>
          <td>Uses HMAC-based pseudonym generation</td>
        </tr>
        <tr>
          <td>PA_02</td>
          <td>‚úÖ Met</td>
          <td>SHALL support pseudonym-based authentication</td>
          <td>Through selective disclosure of pseudonym</td>
        </tr>
        <tr>
          <td>PA_03</td>
          <td>‚úÖ Met</td>
          <td>SHALL support cross-device use of pseudonyms</td>
          <td>Through sync of nym_seed and mapping tables.</td>
        </tr>
        <tr>
          <td>PA_04</td>
          <td>‚úÖ Met</td>
          <td>SHALL support multiple pseudonyms per service</td>
          <td>Multiple indexes mapped to a domain</td>
        </tr>
        <tr>
          <td>PA_05</td>
          <td>‚úÖ Met</td>
          <td>SHOULD enable user-chosen alias per pseudonym</td>
          <td>User explicitly enters alias at nym registration</td>
        </tr>
        <tr>
          <td>PA_06a</td>
          <td>‚úÖ Met</td>
          <td>SHALL prompt user if multiple pseudonyms exist</td>
          <td>User selects domain and alias manually</td>
        </tr>
        <tr>
          <td>PA_06b</td>
          <td>‚úÖ Met</td>
          <td>SHOULD display aliases in pseudonym prompt</td>
          <td>Alias list is displayed for user selection</td>
        </tr>
        <tr>
          <td>PA_07</td>
          <td>‚ùì Unclear</td>
          <td>Requirement not relevant</td>
          <td>Storing pseudonym vs ability to generate it</td>
        </tr>
        <tr>
          <td>PA_08</td>
          <td>‚ùì Unclear</td>
          <td>Advanced policy or lifecycle controls</td>
          <td>Requires features not in scope (e.g., revocation, rotation)</td>
        </tr>
        <tr>
          <td>PA_08a</td>
          <td>‚ùì Unclear</td>
          <td>Support pseudonym lifecycle awareness</td>
          <td>Not in scope for this demo</td>
        </tr>
        <tr>
          <td>PA_09</td>
          <td>‚úÖ Met</td>
          <td>SHALL support viewing all pseudonyms and their associated services</td>
          <td>Through mappings</td>
        </tr>
        <tr>
          <td>PA_10</td>
          <td>‚ùå Not Met</td>
          <td>Conflicting requirement</td>
          <td>Conflicts with WUA_18; ignored in current demo</td>
        </tr>
        <tr>
          <td>PA_11</td>
          <td>‚ùå Not Met</td>
          <td>Conflicting requirement</td>
          <td>Conflicts with WUA_18; ignored in current demo</td>
        </tr>
        <tr>
          <td>PA_12</td>
          <td>‚úÖ Met</td>
          <td>RP SHALL be able to verify link between pseudonym and attestation</td>
          <td>Pseudonym is a disclosable attribute</td>
        </tr>
        <tr>
          <td>PA_13</td>
          <td>‚úÖ Met</td>
          <td>RP SHALL be able to validate binding</td>
          <td>Pseudonym is a disclosable attribute</td>
        </tr>
        <tr>
          <td>PA_14</td>
          <td>‚ùå Not Met</td>
          <td>SHALL store information required for authenticating with pseudonym in WSCA / WSCD</td>
          <td>Not applicable when nym is disclosable attribute</td>
        </tr>
        <tr>
          <td>PA_15</td>
          <td>‚úÖ Met</td>
          <td>RP SHALL NOT be able to map nym to real identity</td>
          <td>Nym generation using HMAC is one way</td>
        </tr>
        <tr>
          <td>PA_16</td>
          <td>‚úÖ Met</td>
          <td>SHALL NOT reveal the same pseudonym to different services unless the user choses to do so</td>
          <td>Met with Step 1a</td>
        </tr>
        <tr>
          <td>PA_17</td>
          <td>‚ö†Ô∏è Conflict</td>
          <td>Conflicts with PA_16</td>
          <td>Assuming req is moderated by PA_16, then met using HMAC</td>
        </tr>
        <tr>
          <td>PA_18</td>
          <td>‚úÖ Met</td>
          <td>SHALL have enough entropy to avoid nym collision</td>
          <td>Met using 256-bit random nym seed</td>
        </tr>
        <tr>
          <td>PA_19</td>
          <td>‚úÖ Met</td>
          <td>SHALL NOT share nym aliases with any RP</td>
          <td>Met using HMAC(seed, index)</td>
        </tr>
        <tr>
          <td>PA_20-22</td>
          <td>‚õî Irrelevant</td>
          <td>SHALL verify RP identity before anything else</td>
          <td>Out of scope for this demo</td>
        </tr>
      </tbody>
    </table>
  </div>

  <script src="script.js"></script>
</body>

</html>
